import primes
team3 = [52, 35, 7, 74, 64, 53, 23, 35, 52, 35, 94, 12, 33, 97, 35, 52, 23, 66, 110, 35, 12, 35, 120, 12, 125, 74, 69, 35, 115, 12, 69, 23, 35, 74, 89, 35, 120, 12, 33, 100, 15, 35, 120, 12, 33, 100, 35, 18, 74, 69, 7, 110, 97, 35, 42, 120, 84, 23, 23, 84, 33, 2, 35, 84, 23, 35, 84, 110, 35, 12, 110, 35, 43, 12, 69, 7, 35, 12, 110, 35, 120, 12, 38, 84, 33, 2, 35, 120, 64, 89, 89, 84, 33, 110, 35, 18, 84, 23, 43, 74, 64, 23, 35, 89, 79, 74, 64, 69, 97, 35, 52, 23, 66, 110, 35, 12, 110, 35, 43, 12, 69, 7, 35, 12, 110, 35, 110, 115, 84, 23, 23, 84, 33, 2, 35, 18, 84, 23, 43, 74, 64, 23, 35, 110, 12, 79, 84, 105, 12, 15, 35, 33, 12, 115, 115, 84, 33, 2, 35, 18, 84, 23, 43, 74, 64, 23, 35, 12, 35, 115, 84, 79, 79, 74, 18, 15, 35, 7, 69, 84, 105, 84, 33, 2, 35, 12, 35, 23, 69, 12, 84, 33, 35, 18, 84, 23, 43, 74, 64, 23, 35, 23, 69, 12, 94, 38, 110, 15, 35, 110, 12, 84, 79, 84, 33, 2, 35, 23, 74, 35, 37, 64, 110, 110, 84, 12, 35, 18, 84, 23, 43, 74, 64, 23, 35, 12, 35, 53, 74, 12, 23, 15, 35, 18, 12, 110, 43, 84, 33, 2, 35, 100, 74, 64, 69, 35, 43, 12, 33, 7, 110, 35, 18, 84, 23, 43, 74, 64, 23, 35, 110, 74, 12, 115, 15, 35, 74, 69, 35, 110, 43, 84, 23, 23, 84, 33, 2, 35, 18, 84, 23, 43, 74, 64, 23, 35, 12, 35, 53, 64, 23, 23, 97, 35, 108, 33, 7, 15, 35, 12, 33, 100, 18, 12, 100, 15, 35, 18, 43, 12, 23, 35, 18, 74, 64, 79, 7, 35, 52, 35, 2, 12, 84, 33, 26, 35, 108, 33, 35, 12, 18, 12, 69, 7, 26, 35, 108, 35, 94, 12, 110, 43, 35, 53, 74, 33, 64, 110, 26, 35, 21, 69, 12, 2, 2, 84, 33, 2, 35, 69, 84, 2,
         43, 23, 110, 26, 35, 114, 43, 100, 35, 110, 43, 74, 64, 79, 7, 35, 52, 35, 110, 23, 69, 12, 84, 33, 35, 120, 100, 35, 53, 69, 12, 84, 33, 26, 35, 52, 23, 66, 110, 35, 33, 74, 23, 35, 18, 74, 69, 23, 43, 35, 7, 74, 84, 33, 2, 97, 35, 1, 74, 18, 15, 35, 12, 35, 2, 69, 12, 120, 120, 12, 23, 84, 94, 12, 79, 35, 115, 12, 69, 12, 2, 69, 12, 115, 43, 35, 18, 84, 23, 43, 74, 64, 23, 35, 94, 74, 120, 120, 12, 110, 77, 35, 23, 43, 12, 23, 35, 18, 74, 64, 79, 7, 35, 18, 74, 18, 35, 120, 74, 110, 23, 35, 89, 74, 79, 38, 110, 35, 74, 33, 35, 124, 64, 74, 69, 12, 15, 35, 7, 74, 33, 66, 23, 35, 100, 74, 64, 35, 23, 43, 84, 33, 38, 26, 35, 62, 74, 64, 79, 7, 35, 100, 74, 64, 35, 7, 74, 35, 84, 23, 26, 35, 52, 89, 35, 110, 74, 15, 35, 52, 35, 23, 84, 115, 35, 120, 100, 35, 43, 12, 23, 35, 23, 74, 35, 100, 74, 64, 55, 74, 69, 35, 52, 35, 18, 74, 64, 79, 7, 35, 84, 89, 35, 52, 35, 43, 12, 7, 35, 12, 35, 43, 12, 23, 97, 35, 42, 69, 15, 35, 43, 74, 18, 35, 12, 53, 74, 64, 23, 35, 12, 35, 115, 12, 69, 12, 2, 69, 12, 115, 43, 35, 18, 84, 23, 43, 74, 64, 23, 35, 115, 64, 33, 94, 23, 64, 12, 23, 84, 74, 33, 26, 35, 42, 69, 35, 12, 35, 115, 12, 69, 12, 2, 69, 12, 115, 43, 35, 18, 84, 23, 43, 74, 64, 23, 35, 33, 74, 64, 33, 110, 26, 35, 52, 89, 35, 100, 74, 64, 35, 94, 12, 33, 35, 7, 74, 35, 23, 43, 12, 23, 15, 35, 100, 74, 64, 66, 79, 79, 35, 18, 84, 33, 35, 120, 100, 35, 12, 7, 120, 84, 69, 12, 23, 84, 74, 33, 97, 35, 98, 74, 35, 74, 33, 97, 35, 119, 69, 100, 76, 35, 52, 66, 120, 35, 18, 12, 84, 23, 84, 33, 2, 25]
# [41,3] [25,(-1*25*3)] funny vowel distribution
teamsp = [115, 111, 54, 45, 54, 23, 2, 64, 23, 92, 45, 106, 97, 35, 54, 102, 45, 23, 2, 97, 23, 83, 111, 2, 64, 23, 121, 2, 54, 12, 23, 116, 73, 23, 59, 2, 73, 54, 123, 23, 12, 2, 83, 111, 23, 2, 83, 64, 23, 64, 54, 121, 54, 45, 106, 59, 23, 7, 116, 12, 54, 45, 64, 123, 23, 117, 111, 106, 121, 2, 97, 92, 23, 125, 54, 54, 97, 23, 116, 45, 2, 92, 2, 97, 106, 59, 59, 50, 23, 125, 45, 54, 106, 83, 111, 54, 35, 23, 125, 50, 23, 83, 111, 54, 23, 48, 45, 54, 106, 83, 116, 45, 23, 2, 97, 83, 116, 23, 106, 23, 73, 54, 12, 23, 73, 116, 45, 78, 64, 23, 116, 45, 23, 2, 97, 83, 116, 23, 116, 97, 54, 24, 23, 117, 106, 97, 35, 23, 83, 111, 106, 83, 123, 23, 12, 111, 2, 59, 64, 83, 23, 83, 111, 2, 64, 23, 7, 59, 106, 97,
          54, 83, 23, 111, 106, 64, 23, 92, 116, 97, 54, 23, 16, 50, 16, 59, 2, 97, 92, 23, 116, 97, 23, 106, 16, 16, 116, 45, 35, 2, 97, 92, 23, 83, 116, 23, 83, 111, 54, 23, 73, 2, 31, 54, 35, 23, 59, 106, 12, 23, 116, 73, 23, 117, 92, 45, 106, 121, 2, 83, 50, 123, 23, 73, 45, 116, 78, 23, 64, 116, 23, 64, 2, 78, 7, 59, 54, 23, 106, 23, 125, 54, 92, 2, 97, 97, 2, 97, 92, 23, 54, 97, 35, 59, 54, 64, 64, 23, 73, 116, 45, 78, 64, 23, 78, 116, 64, 83, 23, 117, 125, 54, 106, 102, 83, 2, 73, 102, 59, 23, 106, 97, 35, 23, 78, 116, 64, 83, 23, 12, 116, 97, 35, 54, 45, 73, 102, 59, 23, 111, 106, 121, 54, 23, 125, 54, 54, 97, 23, 106, 97, 35, 23, 106, 45, 54, 23, 125, 54, 2, 97, 92, 23, 54, 121, 116, 59, 121, 54, 35, 33]
team2 = [84, 104, 105, 115, 32, 105, 115, 32, 97, 110, 32, 117, 110, 117, 115, 117, 97, 108, 32, 112, 97, 114, 97, 103, 114, 97, 112, 104, 46, 32, 73, 82, 17, 109, 32, 99, 117, 114, 105, 111, 117, 115, 32, 97, 115, 32, 116, 111, 32, 106, 117, 115, 116, 32, 104, 111, 119, 32, 113, 117, 105, 99, 107, 108, 121, 32, 121, 111, 117, 32, 99, 97, 110, 32, 102, 105, 110, 100, 32, 111, 117, 116, 32, 119, 104, 97, 116, 32, 105, 115, 32, 115, 111, 32, 117, 110, 117, 115, 117, 97, 108, 32, 97, 98, 111, 117, 116, 32, 105, 116, 46, 32, 73, 116, 32, 108, 111, 111, 107, 115, 32, 115, 111, 32, 111, 114, 100, 105, 110, 97, 114, 121, 32, 97, 110, 100, 32, 112, 108, 97, 105, 110, 32, 116, 104, 97, 116, 32, 121, 111, 117, 32, 119, 111, 117, 108, 100, 32, 116, 104, 105, 110, 107, 32, 110, 111, 116, 104, 105, 110, 103, 32, 119, 97, 115, 32, 119, 114, 111, 110, 103, 32, 119, 105, 116, 104, 32, 105, 116, 46, 32, 73, 110, 32, 102, 97, 99, 116, 44, 32, 110, 111, 116, 104,
         105, 110, 103, 32, 105, 115, 32, 119, 114, 111, 110, 103, 32, 119, 105, 116, 104, 32, 105, 116, 33, 32, 73, 116, 32, 105, 115, 32, 104, 105, 103, 104, 108, 121, 32, 117, 110, 117, 115, 117, 97, 108, 32, 116, 104, 111, 117, 103, 104, 46, 32, 83, 116, 117, 100, 121, 32, 105, 116, 32, 97, 110, 100, 32, 116, 104, 105, 110, 107, 32, 97, 98, 111, 117, 116, 32, 105, 116, 44, 32, 98, 117, 116, 32, 121, 111, 117, 32, 115, 116, 105, 108, 108, 32, 109, 97, 121, 32, 110, 111, 116, 32, 102, 105, 110, 100, 32, 97, 110, 121, 116, 104, 105, 110, 103, 32, 111, 100, 100, 46, 32, 66, 117, 116, 32, 105, 102, 32, 121, 111, 117, 32, 119, 111, 114, 107, 32, 97, 116, 32, 105, 116, 32, 97, 32, 98, 105, 116, 44, 32, 121, 111, 117, 32, 109, 105, 103, 104, 116, 32, 102, 105, 110, 100, 32, 111, 117, 116, 46, 32, 84, 114, 121, 32, 116, 111, 32, 100, 111, 32, 115, 111, 32, 119, 105, 116, 104, 111, 117, 116, 32, 97, 110, 121, 32, 99, 111, 97, 99, 104, 105, 110, 103, 46]
joshrob = [27, 90, 83, 63, 123, 36, 32, 81, 70, 117, 97, 97, 83, 90, 29, 32, 83, 97, 32, 123, 32, 97, 117, 49, 83, 123, 36, 32, 97, 83, 63, 23, 36, 123, 124, 83, 117, 90, 32, 50, 83, 76, 103, 117, 32, 29, 123, 63, 103, 32, 97, 103, 70, 83, 103, 97, 32, 78, 76, 103, 50, 103, 36, 117, 16, 103, 76, 32, 123, 90, 76, 32, 16, 23, 22, 36, 83, 97, 56, 103, 76, 32, 22, 3, 32, 122, 83, 90, 124, 103, 90, 76, 117, 32, 123, 90, 76, 32, 49, 70, 103, 123, 124, 103, 76, 32, 22, 3, 32, 41, 123, 124, 97, 23, 3, 123, 32, 7, 29, 23, 49, 56, 83, 26, 32, 115, 90, 32, 27, 90, 83, 63, 123, 36, 32, 78, 81, 70, 117, 97, 97, 83, 90, 29, 100, 32, 124, 56, 103, 32, 16, 36, 123, 3, 103, 70, 32, 49, 56, 123, 70, 123, 49, 124, 103, 70, 32, 83, 97, 32, 123, 32, 56, 23, 63, 123, 90, 32, 77, 56, 117, 32, 36, 83, 50, 103, 97, 32, 83, 90, 32, 123, 32, 50, 83, 36, 36, 123, 29, 103, 32, 83, 90, 56, 123, 22, 83, 124, 103, 76, 32, 22, 3, 32, 78, 50, 123, 70, 83, 117, 23, 97, 32, 123, 90, 124, 56, 70, 117, 16, 117, 63, 117, 70, 16, 56, 83, 49, 32, 123, 90, 83, 63, 123, 36, 97, 100, 32, 49, 123, 70, 70, 3, 83, 90, 29, 32, 117, 23, 124, 32, 50, 123, 70, 83, 117, 23, 97, 32, 123, 49, 124, 83, 50, 83, 124, 83, 103, 97, 32, 97, 23, 49, 56, 32, 123, 97, 32, 78, 2, 83, 97, 56, 83, 90, 29, 100, 32, 22, 23, 29, 32, 49, 123, 124, 49, 56, 83, 90, 29, 100, 32, 123, 90, 76, 32, 2, 117, 97, 97, 83, 36, 32, 56, 23, 90, 124, 83, 90, 29, 26, 32, 28, 56, 103, 32, 97, 103, 70, 83, 103, 97, 32, 83, 97, 32, 90, 117, 124, 123, 22, 36, 103, 32, 2, 117, 70, 32, 83, 124, 97, 32, 78, 117, 16, 103, 90, 127, 103, 90, 76, 103, 76, 32, 29, 123, 63, 103, 16, 36, 123, 3, 32, 123, 90, 76, 32, 103, 104, 124, 103, 90, 97, 83, 50, 103, 32, 23, 97, 103, 32, 117, 2, 32, 124, 56, 103, 32, 50, 83, 76, 103, 117, 32, 29, 123, 63, 103, 32, 49, 117, 90, 97, 117, 36, 103, 93, 97, 32, 83, 90, 124, 103, 70, 90, 123, 36, 32, 78, 49, 36, 117, 49, 9, 32, 123, 90, 76, 32, 49, 123, 36, 103, 90, 76, 123, 70, 32, 124, 117, 32, 97, 83, 63, 23, 36, 123, 124, 103, 32, 70, 103, 123, 36, 32, 16, 123, 97, 97, 123, 29, 103, 32, 117, 2, 32, 124, 83, 63, 103, 26, 78, 1, 83, 90, 49, 103, 32, 83, 124, 97, 32, 83, 90, 83, 124, 83, 123, 36, 32, 70, 103, 36, 103,
           123, 97, 103, 32, 83, 90, 32, 6, 80, 80, 107, 100, 32, 2, 83, 50, 103, 32, 27, 90, 83, 63, 123, 36, 32, 81, 70, 117, 97, 97, 83, 90, 29, 32, 29, 123, 63, 103, 97, 32, 56, 123, 50, 103, 32, 22, 103, 103, 90, 32, 78, 70, 103, 36, 103, 123, 97, 103, 76, 32, 77, 117, 70, 36, 76, 77, 83, 76, 103, 100, 32, 117, 90, 103, 32, 103, 123, 49, 56, 32, 2, 117, 70, 32, 124, 56, 103, 32, 122, 83, 90, 124, 103, 90, 76, 117, 32, 114, 60, 53, 83, 75, 23, 103, 32, 48, 36, 123, 3, 103, 70, 32, 120, 103, 90, 56, 123, 90, 49, 103, 76, 32, 123, 90, 76, 32, 78, 70, 103, 83, 97, 97, 23, 103, 76, 32, 2, 117, 70, 32, 124, 56, 103, 32, 61, 123, 63, 103, 81, 23, 22, 103, 19, 100, 32, 122, 83, 90, 124, 103, 90, 76, 117, 32, 108, 1, 100, 32, 109, 83, 83, 100, 32, 122, 83, 90, 124, 103, 90, 76, 117, 32, 33, 108, 1, 32, 123, 90, 76, 32, 122, 83, 90, 124, 103, 90, 76, 117, 32, 1, 77, 83, 124, 49, 56, 26, 32, 78, 28, 56, 103, 32, 97, 103, 70, 83, 103, 97, 32, 56, 123, 97, 32, 22, 103, 103, 90, 32, 22, 117, 124, 56, 32, 49, 70, 83, 124, 83, 49, 123, 36, 36, 3, 32, 123, 90, 76, 32, 49, 117, 63, 63, 103, 70, 49, 83, 123, 36, 36, 3, 32, 97, 23, 49, 49, 103, 97, 97, 2, 23, 36, 32, 123, 90, 76, 32, 56, 123, 97, 32, 97, 117, 36, 76, 32, 78, 117, 50, 103, 70, 32, 33, 80, 32, 63, 83, 36, 36, 83, 117, 90, 32, 23, 90, 83, 124, 97, 32, 77, 117, 70, 36, 76, 77, 83, 76, 103, 26, 32, 28, 56, 70, 103, 103, 32, 97, 16, 83, 90, 127, 117, 2, 2, 32, 29, 123, 63, 103, 97, 32, 56, 123, 50, 103, 32, 123, 36, 97, 117, 32, 22, 103, 103, 90, 32, 70, 103, 36, 103, 123, 97, 103, 76, 94, 32, 78, 27, 90, 83, 63, 123, 36, 32, 81, 70, 117, 97, 97, 83, 90, 29, 94, 32, 88, 123, 16, 16, 3, 32, 88, 117, 63, 103, 32, 108, 103, 97, 83, 29, 90, 103, 70, 32, 2, 117, 70, 32, 122, 83, 90, 124, 103, 90, 76, 117, 32, 33, 108, 1, 100, 32, 27, 90, 83, 63, 123, 36, 32, 81, 70, 117, 97, 97, 83, 90, 29, 94, 32, 27, 63, 83, 83, 22, 117, 32, 78, 34, 103, 97, 124, 83, 50, 123, 36, 32, 2, 117, 70, 32, 109, 83, 83, 32, 55, 100, 32, 123, 90, 76, 32, 27, 90, 83, 63, 123, 36, 32, 81, 70, 117, 97, 97, 83, 90, 29, 94, 32, 48, 117, 49, 9, 103, 124, 32, 81, 123, 63, 16, 32, 2, 117, 70, 32, 63, 117, 22, 83, 36, 103, 32, 76, 103, 50, 83, 49, 103, 97, 26]


def encrypt(digitstring, key):
    return [key[0]*x+key[1] % 128 for x in digitstring]


def decrypt(digitstring, verbose=True):
    # make sure things are reasonable
    if max(digitstring) >= 128:
        return (0)

    # count the frequencies

    counts = [0]*128

    for y in digitstring:
        counts[y] = counts[y]+1
    if verbose:
        for i in range(0, 128):
            if counts[i] > 0:
                print(i, chr(i), counts[i])

    tmp = [(counts[x], x, chr(x)) for x in range(0, 128) if counts[x] > 0]
    tmp.sort(reverse=True)
    if verbose:
        print(tmp[:5])

    # assume space (32) and e(101) are the most frequent
    spacecodedas = tmp[0][1]
    ecodedas = tmp[1][1]

    # determine encode and decode keys
    # 13 is the inverse of 69=101-32
    # we're solving simultaneous linear equations here
    a = 13 * (ecodedas-spacecodedas) % 128
    b = (spacecodedas - 32 * a) % 128
    if verbose:
        print("encode key ", (a, b))
    ans = primes.extended_gcd(a, 128)
    if verbose:
        print(ans)
    if verbose:
        print("decodekey=", (ans[0] % 128, (-ans[0]*b) % 128))
    encodekey = (a, b)
    decodekey = (ans[0] % 128, (-ans[0]*b) % 128)

    if verbose:
        print("space \' \' (32) encodes as",
              (encodekey[0]*32+encodekey[1]) % 128)
        print("e \'e\' (101) encodes as",
              (encodekey[0]*101+encodekey[1]) % 128)
        print(spacecodedas, "decrypts as ",
              (decodekey[0]*spacecodedas+decodekey[1]) % 128)
        print(ecodedas, "decrypts as ",
              (decodekey[0]*ecodedas+decodekey[1]) % 128)
    # decrypt
    decdigits = [(decodekey[0]*x+decodekey[1]) % (128) for x in digitstring]
    dectext = (chr(int(x)) for x in decdigits)
    print("".join(dectext))


decrypt(teamsp, False)
